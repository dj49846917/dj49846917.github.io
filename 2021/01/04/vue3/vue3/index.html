<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>vue3开发总结 | 杜江的博客</title><meta name="description" content="Vue是一套用于构建用户界面的渐进式框架。"><meta name="keywords" content="vue"><meta name="author" content="杜江"><meta name="copyright" content="杜江"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2021/01/04/vue3/vue3/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="vue3开发总结"><meta property="og:url" content="http://yoursite.com/2021/01/04/vue3/vue3/"><meta property="og:site_name" content="杜江的博客"><meta property="og:description" content="Vue是一套用于构建用户界面的渐进式框架。"><meta property="og:image" content="http://yoursite.com/images/vue/vue.jpg"><meta property="article:published_time" content="2021-01-04T05:41:56.000Z"><meta property="article:modified_time" content="2024-04-18T03:43:57.903Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="springboot" href="http://yoursite.com/2021/05/06/springboot/springboot/"><link rel="next" title="面试——node篇" href="http://yoursite.com/2020/12/30/interview/interview-node/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/images/hexo/avater.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">46</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">38</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">48</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#开发环境搭建"><span class="toc-number">1.</span> <span class="toc-text">开发环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装插件"><span class="toc-number">1.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装设置"><span class="toc-number">1.2.</span> <span class="toc-text">安装设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装vantui"><span class="toc-number">1.3.</span> <span class="toc-text">安装vantui</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#最新vue3项目vite使用"><span class="toc-number">2.</span> <span class="toc-text">最新vue3项目vite使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#pinia的使用"><span class="toc-number">2.1.</span> <span class="toc-text">pinia的使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vite的使用"><span class="toc-number">3.</span> <span class="toc-text">vite的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装插件-1"><span class="toc-number">3.1.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在vite中使用vue-router"><span class="toc-number">3.2.</span> <span class="toc-text">在vite中使用vue-router</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在vite中使用vuex"><span class="toc-number">3.3.</span> <span class="toc-text">在vite中使用vuex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在vite中使用sass、less、stylus"><span class="toc-number">3.4.</span> <span class="toc-text">在vite中使用sass、less、stylus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在vite中，使用element-plus"><span class="toc-number">3.5.</span> <span class="toc-text">在vite中，使用element-plus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在vite中，使用mockjs"><span class="toc-number">3.6.</span> <span class="toc-text">在vite中，使用mockjs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vite生产环境中使用Mock"><span class="toc-number">3.6.1.</span> <span class="toc-text">vite生产环境中使用Mock</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在vite中使用多环境（非常重要！！）"><span class="toc-number">3.7.</span> <span class="toc-text">在vite中使用多环境（非常重要！！）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在vite中使用接口代理"><span class="toc-number">3.8.</span> <span class="toc-text">在vite中使用接口代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在vite中使用vant-ui"><span class="toc-number">3.9.</span> <span class="toc-text">在vite中使用vant ui</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vant-ui的rem适配"><span class="toc-number">4.</span> <span class="toc-text">vant ui的rem适配</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rem适配pc端方案"><span class="toc-number">5.</span> <span class="toc-text">rem适配pc端方案</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用vite构建vue项目打包发布gitee-pages或者github-pages"><span class="toc-number">6.</span> <span class="toc-text">使用vite构建vue项目打包发布gitee pages或者github pages</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vsCode没有代码提示的解决办法"><span class="toc-number">7.</span> <span class="toc-text">vsCode没有代码提示的解决办法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#在vue3中使用全局变量"><span class="toc-number">8.</span> <span class="toc-text">在vue3中使用全局变量</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#封装axios"><span class="toc-number">9.</span> <span class="toc-text">封装axios</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#在vue3中使用element-plus的form组件并校验"><span class="toc-number">10.</span> <span class="toc-text">在vue3中使用element-plus的form组件并校验</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3修改框架的默认样式"><span class="toc-number">11.</span> <span class="toc-text">vue3修改框架的默认样式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3给computed传值，动态修改图片路径"><span class="toc-number">12.</span> <span class="toc-text">vue3给computed传值，动态修改图片路径</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3中使用js-cookie"><span class="toc-number">13.</span> <span class="toc-text">vue3中使用js-cookie</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3中使用computed"><span class="toc-number">14.</span> <span class="toc-text">vue3中使用computed</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3中监听路由值的变化"><span class="toc-number">15.</span> <span class="toc-text">vue3中监听路由值的变化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#在vue3中使用404页面"><span class="toc-number">16.</span> <span class="toc-text">在vue3中使用404页面</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#在vue3中绑定样式"><span class="toc-number">17.</span> <span class="toc-text">在vue3中绑定样式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#element-plus递归渲染动态菜单"><span class="toc-number">18.</span> <span class="toc-text">element-plus递归渲染动态菜单</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vue3移动端开发"><span class="toc-number">19.</span> <span class="toc-text">vue3移动端开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3中使用vant-ui"><span class="toc-number">19.1.</span> <span class="toc-text">vue3中使用vant ui</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3rem转换"><span class="toc-number">19.2.</span> <span class="toc-text">vue3rem转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#底部安全区适配"><span class="toc-number">19.3.</span> <span class="toc-text">底部安全区适配</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><header class="post-bg" id="page-header" style="background-image: url(/images/vue/vue.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">杜江的博客</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">vue3开发总结</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-01-04 13:41:56"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2021-01-04</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2024-04-18 11:43:57"><i class="fas fa-history fa-fw"></i> 更新于 2024-04-18</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/vue/">vue</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="开发环境搭建"><a href="#开发环境搭建" class="headerlink" title="开发环境搭建"></a>开发环境搭建</h1><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><ol>
<li><p>对于Vue 3，您应该使用Vue CLI v4.5（可从上npm获得）@vue/cli。要升级，您需要在@vue/cli全球范围内重新安装最新版本：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yarn global add @vue&#x2F;cli</span><br><span class="line"># OR</span><br><span class="line">npm install -g @vue&#x2F;cli</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建项目</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vue create vue3-typescript</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="安装设置"><a href="#安装设置" class="headerlink" title="安装设置"></a>安装设置</h2>  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. Please pick a preset: Manually select features</span><br><span class="line"></span><br><span class="line">2.  (*) Choose Vue version</span><br><span class="line">    (*) Babel</span><br><span class="line">    (*) TypeScript</span><br><span class="line">    ( ) Progressive Web App (PWA) Support</span><br><span class="line">    (*) Router</span><br><span class="line">    (*) Vuex</span><br><span class="line">    (*) CSS Pre-processors</span><br><span class="line">    (*) Linter &#x2F; Formatter</span><br><span class="line">    ( ) Unit Testing</span><br><span class="line">    ( ) E2E Testing</span><br><span class="line"></span><br><span class="line">3. ? Choose a version of Vue.js that you want to start the project with </span><br><span class="line">      2.x</span><br><span class="line">    &gt; 3.x (Preview)</span><br><span class="line"></span><br><span class="line">4. Use class-style component syntax? No</span><br><span class="line"></span><br><span class="line">5. Use Babel alongside TypeScript (required for modern mode, auto-detected polyfills, transpiling JSX)? No</span><br><span class="line"></span><br><span class="line">6. Use history mode for router? (Requires proper server setup for index fallback in production) Yes</span><br><span class="line"></span><br><span class="line">7. Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default): (Use arrow keys)</span><br><span class="line">  &gt; Sass&#x2F;SCSS (with dart-sass)</span><br><span class="line">    Sass&#x2F;SCSS (with node-sass)</span><br><span class="line">    Less</span><br><span class="line">    Stylus</span><br><span class="line"></span><br><span class="line">8. Pick a linter &#x2F; formatter config: (Use arrow keys)</span><br><span class="line">  &gt; ESLint with error prevention only</span><br><span class="line">    ESLint + Airbnb config</span><br><span class="line">    ESLint + Standard config</span><br><span class="line">    ESLint + Prettier</span><br><span class="line">    TSLint (deprecated)</span><br><span class="line"></span><br><span class="line">9. Pick additional lint features: (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)</span><br><span class="line">  &gt;(*) Lint on save</span><br><span class="line">  ( ) Lint and fix on commit</span><br><span class="line"></span><br><span class="line">10. Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)</span><br><span class="line">    &gt; In dedicated config files</span><br><span class="line">      In package.json</span><br><span class="line"></span><br><span class="line">11. Save this as a preset for future projects? (y&#x2F;N) n</span><br></pre></td></tr></table></figure>

<h2 id="安装vantui"><a href="#安装vantui" class="headerlink" title="安装vantui"></a>安装vantui</h2>  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm i vant@next -S</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：在安装了vant后会报以下错误：<ul>
<li><img src= "/img/loading.gif" data-src="/images/vue/installError.jpg" alt="安装时的报错"></li>
<li>解决办法：</li>
</ul>
</li>
</ul>
<h1 id="最新vue3项目vite使用"><a href="#最新vue3项目vite使用" class="headerlink" title="最新vue3项目vite使用"></a>最新vue3项目vite使用</h1><ol>
<li>安装命令：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm create vue@3  可选择vur-router、pinia、eslint</span><br></pre></td></tr></table></figure></li>
<li>运行时代码强校验<ul>
<li>安装命令：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --save-dev vite-plugin-eslint</span><br></pre></td></tr></table></figure></li>
<li>在.eslintrc.cjs中添加如下代码：(vite-plugin-eslint有报错，但是不影响运行，所以直接注释掉)<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  &#x2F;&#x2F; @ts-ignore</span><br><span class="line">  import eslintPlugin from &#39;vite-plugin-eslint&#39;</span><br><span class="line"></span><br><span class="line">  export default defineConfig(&#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    ...</span><br><span class="line">    eslintPlugin()</span><br><span class="line">  ],</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
<h2 id="pinia的使用"><a href="#pinia的使用" class="headerlink" title="pinia的使用"></a>pinia的使用</h2><ol>
<li><p>在src下，新建store/index.ts,并写入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import userStore from &quot;.&#x2F;modules&#x2F;user&quot;;</span><br><span class="line"></span><br><span class="line">export default function useStore() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        user: userStore()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>在src/store下新建modules/user.ts，并写入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; defineStore &#125; from &#39;pinia&#39;</span><br><span class="line"></span><br><span class="line">const userStore &#x3D; defineStore(&#39;user&#39;, &#123;</span><br><span class="line">  state() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">      this.count ++;</span><br><span class="line">    &#125;,</span><br><span class="line">    decrement() &#123;</span><br><span class="line">      this.count --;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export default userStore</span><br></pre></td></tr></table></figure></li>
<li><p>检查在main.ts中引入pinia</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#39;vue&#39;</span><br><span class="line">import &#123; createPinia &#125; from &#39;pinia&#39;</span><br><span class="line"></span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">const app &#x3D; createApp(App)</span><br><span class="line">app.use(createPinia())</span><br><span class="line">app.mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure></li>
<li><p>使用pinia中的count</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">  import useStore from &#39;.&#x2F;stores&#39;;</span><br><span class="line"></span><br><span class="line">  const store &#x3D; useStore();</span><br><span class="line"></span><br><span class="line">  const add &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    store.user.increment()</span><br><span class="line">  &#125;</span><br><span class="line">  const deleteAction &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    store.user.decrement();</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; store.user.count &#125;&#125;</span><br><span class="line">    &lt;button @click&#x3D;&quot;add&quot;&gt;加&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;deleteAction&quot;&gt;减&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>使用pinia中的storeToRefs进行解构（不能用toRefs,因为会把store里面的所有属性方法都转换成ref）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import useStore from &#39;.&#x2F;stores&#39;;</span><br><span class="line">import &#123; storeToRefs &#125; from &#39;pinia&#39;;</span><br><span class="line"></span><br><span class="line">const store &#x3D; useStore();</span><br><span class="line">const &#123; count &#125; &#x3D; storeToRefs(store.user);</span><br><span class="line"></span><br><span class="line">const add &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  store.user.increment()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const deleteAction &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  store.user.decrement</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &#123;&#123; count &#125;&#125;</span><br><span class="line">  &lt;button @click&#x3D;&quot;add&quot;&gt;加&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;button @click&#x3D;&quot;deleteAction&quot;&gt;减&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>$subscribe</code>相当于watch,当值发生变化时触发</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">  import useStore from &#39;.&#x2F;stores&#39;;</span><br><span class="line">  import &#123; storeToRefs &#125; from &#39;pinia&#39;;</span><br><span class="line"></span><br><span class="line">  const store &#x3D; useStore();</span><br><span class="line">  const &#123; count &#125; &#x3D; storeToRefs(store.user);</span><br><span class="line"></span><br><span class="line">  store.user.$subscribe((mutate, state)&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&quot;mutate&quot;, mutate, state);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  const add &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    store.user.increment()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  const deleteAction &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    store.user.decrement</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &#123;&#123; count &#125;&#125;</span><br><span class="line">  &lt;button @click&#x3D;&quot;add&quot;&gt;加&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;button @click&#x3D;&quot;deleteAction&quot;&gt;减&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>组合式API写法</p>
<ul>
<li>修改src/store/modules/user.ts<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; ref &#125; from &#39;vue&#39;</span><br><span class="line">import &#123; defineStore &#125; from &#39;pinia&#39;</span><br><span class="line"></span><br><span class="line">const userStore &#x3D; defineStore(&#39;counter&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  const count &#x3D; ref(0)</span><br><span class="line">  function increment() &#123;</span><br><span class="line">    count.value++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function decrement() &#123;</span><br><span class="line">    count.value--</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return &#123; count, increment, decrement &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export default userStore</span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ol>
<h1 id="vite的使用"><a href="#vite的使用" class="headerlink" title="vite的使用"></a>vite的使用</h1><h2 id="安装插件-1"><a href="#安装插件-1" class="headerlink" title="安装插件"></a>安装插件</h2><ul>
<li><p>npm init vite@latest</p>
<ul>
<li><img src= "/img/loading.gif" data-src="/images/vue/vite%E5%AE%89%E8%A3%85.jpg" alt="vite安装"></li>
<li>npm install</li>
</ul>
</li>
<li><p>详细配置文档请看：<a href="https://cn.vitejs.dev/" target="_blank" rel="noopener">https://cn.vitejs.dev/</a></p>
</li>
</ul>
<h2 id="在vite中使用vue-router"><a href="#在vite中使用vue-router" class="headerlink" title="在vite中使用vue-router"></a>在vite中使用vue-router</h2><ol>
<li><p>安装：</p>
<ul>
<li>npm install –save vue-router@4</li>
</ul>
</li>
<li><p>使用：</p>
<ul>
<li><p>在src下新建文件夹 router，在router下建立文件index.ts，并写入以下代码</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createRouter, createWebHistory &#125; from &#39;vue-router&#39;;</span><br><span class="line"></span><br><span class="line">const routes &#x3D; [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;&#39;,</span><br><span class="line">    name: &#39;Home&#39;,</span><br><span class="line">    component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;Home.vue&#39;), &#x2F;&#x2F;路由懒加载</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const router &#x3D; createRouter(&#123;</span><br><span class="line">  history: createWebHistory(&quot;&#x2F;&quot;), &#x2F;&#x2F;history模式使用HTML5模式</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在main.ts中引入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">import router from &#39;@&#x2F;router&#39;</span><br><span class="line"></span><br><span class="line">const app &#x3D; createApp(App)</span><br><span class="line">app.use(router).mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在tsconfig.json中添加@对应的映射,目的是取消代码的校验错误</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;baseUrl&quot;: &quot;.&quot;,</span><br><span class="line">&quot;paths&quot;: &#123;</span><br><span class="line">  &quot;@&#x2F;*&quot;: [&quot;src&#x2F;*&quot;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>在vite.config.ts中添加@对应的映射</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#39;vite&#39;</span><br><span class="line">import vue from &#39;@vitejs&#x2F;plugin-vue&#39;</span><br><span class="line">import &#123; resolve &#125; from &#39;path&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; https:&#x2F;&#x2F;vitejs.dev&#x2F;config&#x2F;</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [vue()],</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    alias: &#123;</span><br><span class="line">      &#39;@&#39;: resolve(__dirname, &quot;src&quot;) &#x2F;&#x2F;设置别名</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  server: &#123;</span><br><span class="line">    host: &#39;localhost&#39;,</span><br><span class="line">    port: 8080,</span><br><span class="line">    open: true,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>根据提示，需要安装@type/node，执行命令：npm install –save-dev @type/node</p>
</li>
<li><p>在src下新建views文件夹，并新建Home.vue</p>
</li>
</ul>
</li>
</ol>
<h2 id="在vite中使用vuex"><a href="#在vite中使用vuex" class="headerlink" title="在vite中使用vuex"></a>在vite中使用vuex</h2><ol>
<li><p>安装</p>
<ul>
<li>npm install –save vuex@next</li>
</ul>
</li>
<li><p>使用</p>
<ul>
<li><p>在store文件夹下，创建index.ts，并写入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createStore &#125; from &quot;vuex&quot;;</span><br><span class="line">import user from &#39;@&#x2F;store&#x2F;modules&#x2F;user&#39;</span><br><span class="line">export default createStore(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    user</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>在store文件夹下新建modules文件夹，并新建user.ts,写入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const state &#x3D; &#123;</span><br><span class="line">  num: 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const mutations &#x3D; &#123;&#125;</span><br><span class="line"></span><br><span class="line">const actions &#x3D; &#123;&#125;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  namespaced: true,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在main.ts中引入stroe</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">import router from &#39;@&#x2F;router&#39;</span><br><span class="line">import store from &#39;@&#x2F;store&#39;</span><br><span class="line"></span><br><span class="line">const app &#x3D; createApp(App)</span><br><span class="line">app.use(router).use(store).mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在页面中使用：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; data.count &#125;&#125;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &#123; reactive &#125; from &#39;vue&#39;;</span><br><span class="line">  import &#123; useStore &#125; from &quot;vuex&quot;;</span><br><span class="line">  export default &#123;</span><br><span class="line">    setup () &#123;</span><br><span class="line">      const store &#x3D; useStore()</span><br><span class="line">      console.log(&#39;store&#39;,store.state.user.num)</span><br><span class="line">      let data &#x3D; reactive(&#123;</span><br><span class="line">        count: store.state.user.num</span><br><span class="line">      &#125;)</span><br><span class="line">      return &#123;</span><br><span class="line">        data</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
<h2 id="在vite中使用sass、less、stylus"><a href="#在vite中使用sass、less、stylus" class="headerlink" title="在vite中使用sass、less、stylus"></a>在vite中使用sass、less、stylus</h2><ol>
<li>安装<ul>
<li>npm install -D sass</li>
</ul>
</li>
<li>使用<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;style scoped lang&#x3D;&quot;ts&quot;&gt;&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="在vite中，使用element-plus"><a href="#在vite中，使用element-plus" class="headerlink" title="在vite中，使用element-plus"></a>在vite中，使用element-plus</h2><ol>
<li><p>安装</p>
<ul>
<li>npm install element-plus –save</li>
</ul>
</li>
<li><p>引入</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">import router from &#39;@&#x2F;router&#39;</span><br><span class="line">import store from &#39;@&#x2F;store&#39;</span><br><span class="line">import ElementPlus from &#39;element-plus&#39;</span><br><span class="line">import &#39;element-plus&#x2F;lib&#x2F;theme-chalk&#x2F;index.css&#39;;</span><br><span class="line"></span><br><span class="line">const app &#x3D; createApp(App)</span><br><span class="line">app.use(router).use(store).use(ElementPlus).mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>按需导入</p>
<ul>
<li>首先你需要安装unplugin-vue-components 和 unplugin-auto-import这两款插件<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install -D unplugin-vue-components unplugin-auto-import</span><br></pre></td></tr></table></figure></li>
<li>在vite.config.ts中配置<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#39;vite&#39;</span><br><span class="line">import AutoImport from &#39;unplugin-auto-import&#x2F;vite&#39;</span><br><span class="line">import Components from &#39;unplugin-vue-components&#x2F;vite&#39;</span><br><span class="line">import &#123; ElementPlusResolver &#125; from &#39;unplugin-vue-components&#x2F;resolvers&#39;</span><br><span class="line"></span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  &#x2F;&#x2F; ...</span><br><span class="line">  plugins: [</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">    AutoImport(&#123;</span><br><span class="line">      resolvers: [ElementPlusResolver()],</span><br><span class="line">    &#125;),</span><br><span class="line">    Components(&#123;</span><br><span class="line">      resolvers: [ElementPlusResolver()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
<div class="note danger">
            <p>注意:<br>  vite在打包（也就是执行npm run build）的时候，element-plus会报错，解决办法是修改package.json中的build打包命令：<br>  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;build&quot;: &quot;vite build&quot;,</span><br></pre></td></tr></table></figure></p>
          </div>

<h2 id="在vite中，使用mockjs"><a href="#在vite中，使用mockjs" class="headerlink" title="在vite中，使用mockjs"></a>在vite中，使用mockjs</h2><ol>
<li><p>安装：</p>
<ul>
<li>npm i  mockjs -S</li>
<li>npm i vite-plugin-mock -D</li>
</ul>
</li>
<li><p>在vite.config.ts中写入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; UserConfigExport, ConfigEnv &#125; from &#39;vite&#39;;</span><br><span class="line">import &#123; viteMockServe &#125; from &#39;vite-plugin-mock&#39;;</span><br><span class="line">import vue from &#39;@vitejs&#x2F;plugin-vue&#39;;</span><br><span class="line"></span><br><span class="line">export default (&#123; command &#125;: ConfigEnv): UserConfigExport &#x3D;&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      vue(),</span><br><span class="line">      viteMockServe(&#123;</span><br><span class="line">        &#x2F;&#x2F; default</span><br><span class="line">        mockPath: &#39;mock&#39;,</span><br><span class="line">        localEnabled: command &#x3D;&#x3D;&#x3D; &#39;serve&#39;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在跟路径下新建mock文件夹，新建auction.ts并写入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; MockMethod &#125; from &#39;vite-plugin-mock&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 获取列表数据</span><br><span class="line">const getList &#x3D; &#123;</span><br><span class="line">  url: &#39;&#x2F;api&#x2F;get&#39;,</span><br><span class="line">  method: &#39;get&#39;,</span><br><span class="line">  response: (&#123; query &#125;) &#x3D;&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      code: 0,</span><br><span class="line">      data: &#123;</span><br><span class="line">        name: &#39;vben&#39;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default [</span><br><span class="line">  getList,</span><br><span class="line">] as MockMethod[];</span><br></pre></td></tr></table></figure>
</li>
<li><p>在代码中使用mock</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 初始化数据</span><br><span class="line">onMounted(()&#x3D;&gt;&#123;</span><br><span class="line">  axios.get(&quot;&#x2F;api&#x2F;get&quot;).then(res&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&quot;res&quot;, res)</span><br><span class="line">  &#125;).catch(err&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&quot;err&quot;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="vite生产环境中使用Mock"><a href="#vite生产环境中使用Mock" class="headerlink" title="vite生产环境中使用Mock"></a>vite生产环境中使用Mock</h3><ol>
<li>在src下新建mockProdServer.ts(名字无所谓), 把mock文件逐一引入<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;  mockProdServer.ts</span><br><span class="line">import &#123; createProdMockServer &#125; from &#39;vite-plugin-mock&#x2F;es&#x2F;createProdMockServer&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 逐一导入您的mock.ts文件</span><br><span class="line">import cartApi from &#39;..&#x2F;mock&#x2F;cart&#39;</span><br><span class="line">import categoryApi from &#39;..&#x2F;mock&#x2F;cateogry&#39;</span><br><span class="line">import goodsInfoApi from &#39;..&#x2F;mock&#x2F;goodsInfo&#39;</span><br><span class="line">import goodsListApi from &#39;..&#x2F;mock&#x2F;goodsList&#39;</span><br><span class="line">import homeApi from &#39;..&#x2F;mock&#x2F;home&#39;</span><br><span class="line">import loginApi from &#39;..&#x2F;mock&#x2F;login&#39;</span><br><span class="line">import miFamilyApi from &#39;..&#x2F;mock&#x2F;miFamily&#39;</span><br><span class="line"></span><br><span class="line">export function setupProdMockServer() &#123;</span><br><span class="line">  createProdMockServer([...cartApi, ...categoryApi, ...goodsInfoApi, ...goodsListApi, ...homeApi, ...loginApi, ...miFamilyApi]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>修改vite.config.ts，在plugins里面添加以下代码<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  vue(),</span><br><span class="line">  viteMockServe(&#123;</span><br><span class="line">    &#x2F;&#x2F; default</span><br><span class="line">    mockPath: &#39;mock&#39;,</span><br><span class="line">    localEnabled: command &#x3D;&#x3D;&#x3D; &#39;serve&#39;,</span><br><span class="line">    prodEnabled: true,</span><br><span class="line">    &#x2F;&#x2F;  这样可以控制关闭mock的时候不让mock打包到最终代码内</span><br><span class="line">    injectCode: &#96;</span><br><span class="line">      import &#123; setupProdMockServer &#125; from &#39;.&#x2F;mockProdServer&#39;;</span><br><span class="line">      setupProdMockServer();</span><br><span class="line">    &#96;,</span><br><span class="line">  &#125;),</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="在vite中使用多环境（非常重要！！）"><a href="#在vite中使用多环境（非常重要！！）" class="headerlink" title="在vite中使用多环境（非常重要！！）"></a>在vite中使用多环境（非常重要！！）</h2><blockquote>
<p>默认情况下，vite只支持<code>.env.development</code>和<code>.env.production</code>这两个环境文件(创建在根路径下)<br>执行npm run dev时，<code>默认加载.env.development文件中的内容</code>，执行npm run build时，<code>默认加载.env.production文件中的内容</code><br>如果想配置其他环境，例如：配置sit环境，需要创建.env.sit文件后，在package.json中指定环境<code>--mode sit</code><br>在.env.xxx文件中的变量要想在views页面中使用，必须加上<code>VITE_</code>, 必须是大写，例如<code>VITE_NODE_NAME=dev</code><br>.env文件，所有环境都有效</p>
</blockquote>
<ul>
<li><p>具体代码如下：</p>
<ol>
<li><p>在根路径下新建.env.development文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 测试变量</span><br><span class="line">VITE_PROXY_URL&#x3D;https:&#x2F;&#x2F;www.aiqiyi.com</span><br></pre></td></tr></table></figure></li>
<li><p>在根路径下新建.env.production文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 测试变量</span><br><span class="line">VITE_PROXY_URL&#x3D;https:&#x2F;&#x2F;www.baidu.com</span><br></pre></td></tr></table></figure></li>
<li><p>在根路径下新建.env.sit文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 测试变量</span><br><span class="line">VITE_PROXY_URL&#x3D;https:&#x2F;&#x2F;www.youku.com</span><br></pre></td></tr></table></figure></li>
<li><p>修改package.json中的启动命令</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;dev&quot;: &quot;vite&quot;,                      &#x2F;&#x2F; 加载.env.development</span><br><span class="line">  &quot;dev:sit&quot;: &quot;vite --mode sit&quot;,       &#x2F;&#x2F; 加载.env.sit</span><br><span class="line">  &quot;build&quot;: &quot;vite build&quot;,              &#x2F;&#x2F; 加载.env.production</span><br><span class="line">  &quot;serve&quot;: &quot;vite preview&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li><p>在页面中使用环境变量：<code>import.meta.env.VITE_PROXY_URL</code></p>
<ul>
<li>由于新添的<code>VITE_PROXY_URL</code>，在输入的时候没有代码提示，如果要配置代码提示，需要在src/vite-env.d.ts中设置以下代码：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;&#x2F; &lt;reference types&#x3D;&quot;vite&#x2F;client&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 加上这个接口就有代码提示了</span><br><span class="line">interface ImportMetaEnv &#123;</span><br><span class="line">  VITE_APP_PORT: number,</span><br><span class="line">  VITE_PROXY_URL: string,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>在vite.config.ts中，使用环境变量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; loadEnv &#125; from &#39;vite&#39;;</span><br><span class="line"></span><br><span class="line">export default (&#123; command, mode &#125;: ConfigEnv): UserConfigExport &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; 获取根路径</span><br><span class="line">  const root &#x3D; process.cwd();</span><br><span class="line">  &#x2F;&#x2F; 获取环境变量文件的内容</span><br><span class="line">  const envInfo &#x3D; loadEnv(mode, root);</span><br><span class="line"></span><br><span class="line">  server: &#123;</span><br><span class="line">    host: &#39;localhost&#39;,</span><br><span class="line">    port: Number(envInfo.VITE_APP_PORT), &#x2F;&#x2F; 使用</span><br><span class="line">    open: true,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ul>
<h2 id="在vite中使用接口代理"><a href="#在vite中使用接口代理" class="headerlink" title="在vite中使用接口代理"></a>在vite中使用接口代理</h2><ul>
<li>以<code>http://api.vikingship.xyz/api/columns?currentPage=1&amp;pageSize=5</code>这个接口为例<ol>
<li>修改vite.config.ts，添加proxy<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server: &#123;</span><br><span class="line">  host: &#39;localhost&#39;,</span><br><span class="line">  port: Number(envInfo.VITE_APP_PORT),</span><br><span class="line">  open: true,</span><br><span class="line">  proxy: &#123;</span><br><span class="line">    &#39;&#x2F;api&#39;: &#123;</span><br><span class="line">      target: &#39;http:&#x2F;&#x2F;api.vikingship.xyz&#x2F;api&#39;,</span><br><span class="line">      changeOrigin: true,</span><br><span class="line">      rewrite: path &#x3D;&gt; path.replace(&#x2F;^\&#x2F;api&#x2F;, &#39;&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
<li>页面中使用：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import axios from &#39;axios&#39;;</span><br><span class="line"></span><br><span class="line">onMounted(()&#x3D;&gt;&#123;</span><br><span class="line">  axios.get(&quot;&#x2F;api&#x2F;columns?currentPage&#x3D;1&amp;pageSize&#x3D;5&quot;).then(res&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&quot;res&quot;, res)</span><br><span class="line">  &#125;).catch(err&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&quot;err&quot;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ul>
<h2 id="在vite中使用vant-ui"><a href="#在vite中使用vant-ui" class="headerlink" title="在vite中使用vant ui"></a>在vite中使用vant ui</h2><ul>
<li>安装<ul>
<li>执行命令：npm i vant@next -S</li>
</ul>
</li>
<li>使用<ul>
<li>在main.ts中引入<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">import router from &#39;@&#x2F;router&#39;</span><br><span class="line">import store from &#39;@&#x2F;store&#39;</span><br><span class="line">import Vant from &#39;vant&#39;;</span><br><span class="line">import &#39;vant&#x2F;lib&#x2F;index.css&#39;;</span><br><span class="line"></span><br><span class="line">const app &#x3D; createApp(App)</span><br><span class="line">app.use(router).use(store).use(Vant).mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<div class="note danger">
            <p>注意:<br>  出现以下报错：<img src= "/img/loading.gif" data-src="/images/vue/%E6%8A%A5%E9%94%99.png" alt="报错"><br>解决办法：在文件根目录下面的，vite-env.d.ts文件中添加如下代码，即可成功解决该问题。<br>  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">declare module &quot;*.vue&quot; &#123;</span><br><span class="line">  import type &#123; DefineComponent &#125; from &quot;vue&quot;;</span><br><span class="line">  const vueComponent: DefineComponent&lt;&#123;&#125;, &#123;&#125;, any&gt;;</span><br><span class="line">  export default vueComponent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
          </div>

<h1 id="vant-ui的rem适配"><a href="#vant-ui的rem适配" class="headerlink" title="vant ui的rem适配"></a>vant ui的rem适配</h1><ol>
<li>安装<ul>
<li>执行命令：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --save-dev postcss postcss-pxtorem amfe-flexible</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>在main.ts中引入<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">import router from &#39;@&#x2F;router&#39;</span><br><span class="line">import store from &#39;@&#x2F;store&#39;</span><br><span class="line">import Vant from &#39;vant&#39;;</span><br><span class="line">import &#39;vant&#x2F;lib&#x2F;index.css&#39;;</span><br><span class="line">import &#39;@&#x2F;assets&#x2F;css&#x2F;global.scss&#39;;</span><br><span class="line">import &quot;amfe-flexible&#x2F;index.js&quot;</span><br><span class="line"></span><br><span class="line">const app &#x3D; createApp(App)</span><br><span class="line">app.use(router).use(store).use(Vant).mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure></li>
<li>在根路径下新建postcss.config.js<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    &#39;postcss-pxtorem&#39;: &#123;</span><br><span class="line">      rootValue: 37.5,</span><br><span class="line">      propList: [&#39;*&#39;],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="rem适配pc端方案"><a href="#rem适配pc端方案" class="headerlink" title="rem适配pc端方案"></a>rem适配pc端方案</h1><ol>
<li>安装 postcss-pxtorem<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install postcss-pxtorem amfe-flexible -D</span><br></pre></td></tr></table></figure></li>
<li>配置 vite.config.ts<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#39;vite&#39;</span><br><span class="line">import postcssPxtoRem from &#39;postcss-pxtorem&#39;</span><br><span class="line"></span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  css: &#123;</span><br><span class="line">    postcss: &#123;</span><br><span class="line">      plugins: [</span><br><span class="line">        postcssPxtoRem(&#123;</span><br><span class="line">          rootValue: 144, &#x2F;&#x2F; 按照自己的设计稿修改 1440&#x2F;10</span><br><span class="line">          unitPrecision: 5, &#x2F;&#x2F; 保留到5位小数</span><br><span class="line">          selectorBlackList: [&#39;ignore&#39;, &#39;tab-bar&#39;, &#39;tab-bar-item&#39;],  &#x2F;&#x2F; 忽略转换正则匹配项</span><br><span class="line">          propList: [&#39;*&#39;],</span><br><span class="line">          replace: true,</span><br><span class="line">          mediaQuery: false,</span><br><span class="line">          minPixelValue: 0</span><br><span class="line">        &#125;)  </span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>再main.ts文件中引入amfe-flexible<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#39;amfe-flexible&#39;</span><br></pre></td></tr></table></figure></li>
<li>在样式中直接使用 px 作为单位即可</li>
<li>如果是行内样式或者js赋值的px这个插件不会转行rem，这个时候需要在赋值的时候/144<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div :style&#x3D;&quot;&#123;width: 265 &#x2F; 144 + &#39;rem&#39;, height: 180 &#x2F; 144 + &#39;rem&#39;&#125;&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="使用vite构建vue项目打包发布gitee-pages或者github-pages"><a href="#使用vite构建vue项目打包发布gitee-pages或者github-pages" class="headerlink" title="使用vite构建vue项目打包发布gitee pages或者github pages"></a>使用vite构建vue项目打包发布gitee pages或者github pages</h1><ol>
<li>由于我使用了vite的多环境，在.env.development和.env.production中分别添加变量VITE_APP_BASE，设置项目基础路径，也就是你要部署github/gitee的仓库名称，我这里的仓库名称是vue3-shopping<ul>
<li>.env.development<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 项目基础路径</span><br><span class="line">VITE_APP_BASE&#x3D;&#x2F;</span><br></pre></td></tr></table></figure></li>
<li>.env.production<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 项目基础路径</span><br><span class="line">VITE_APP_BASE&#x3D;&#x2F;vue3-shopping&#x2F;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>修改vite.config.ts，设置base属性<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; ConfigEnv, defineConfig, loadEnv, UserConfigExport &#125; from &#39;vite&#39;</span><br><span class="line">import vue from &#39;@vitejs&#x2F;plugin-vue&#39;</span><br><span class="line">import &#123; resolve &#125; from &#39;path&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; https:&#x2F;&#x2F;vitejs.dev&#x2F;config&#x2F;</span><br><span class="line">export default (&#123; command, mode &#125;: ConfigEnv): UserConfigExport &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; 获取根路径</span><br><span class="line">  const root &#x3D; process.cwd();</span><br><span class="line">  &#x2F;&#x2F; 获取环境变量文件的内容</span><br><span class="line">  const envInfo &#x3D; loadEnv(mode, root);</span><br><span class="line">  return &#123;</span><br><span class="line">    plugins: [vue()],</span><br><span class="line">    base: envInfo.VITE_APP_BASE, &#x2F;&#x2F; 核心：读取VITE_APP_BASE</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      alias: &#123;</span><br><span class="line">        &#39;@&#39;: resolve(__dirname, &quot;src&quot;) &#x2F;&#x2F;设置别名</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    server: &#123;</span><br><span class="line">      host: &#39;0.0.0.0&#39;,</span><br><span class="line">      port: Number(envInfo.VITE_APP_PORT), &#x2F;&#x2F; 使用</span><br><span class="line">      open: false,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>修改src/router/index.ts，生产环境中，使用hash路由，这样服务端就不用配置任何东西<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; routeItemType &#125; from &#39;@&#x2F;types&#x2F;global&#39;;</span><br><span class="line">import &#123; createRouter, createWebHashHistory, createWebHistory &#125; from &#39;vue-router&#39;;</span><br><span class="line">export const routes &#x3D; [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;&#39;,</span><br><span class="line">    name: &#39;Layout&#39;,</span><br><span class="line">    redirect: &#39;&#x2F;index&#39;,</span><br><span class="line">    component: () &#x3D;&gt; import(&#39;@&#x2F;layout&#x2F;index.vue&#39;),</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;index&#39;,</span><br><span class="line">        name: &#39;Home&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;Home&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;首页&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">const router &#x3D; createRouter(&#123;</span><br><span class="line">  history: createWebHashHistory(import.meta.env.VITE_APP_BASE), &#x2F;&#x2F; 部署gitee page最好设置hash路由，传入项目仓库基础路径</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure></li>
<li>打开gitee pages，进行部署<ul>
<li><img src= "/img/loading.gif" data-src="/images/vue/%E9%83%A8%E7%BD%B22.jpg" alt="部署"></li>
<li><img src= "/img/loading.gif" data-src="/images/vue/%E9%83%A8%E7%BD%B2.jpg" alt="部署"></li>
</ul>
</li>
</ol>
<div class="note danger">
            <p>注意:<br>  如果要使用history路由模式：<br>    <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const router &#x3D; createRouter(&#123;</span><br><span class="line">  history: createWebHistory(import.meta.env.VITE_APP_BASE), &#x2F;&#x2F; 部署gitee page最好设置hash路由，传入项目仓库基础路径</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>  在nginx上，要添加：<br>    <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">try_files $uri $uri.html &#x2F;index.html $uri&#x2F; &#x3D;404;</span><br></pre></td></tr></table></figure></p>
          </div>

<h1 id="vsCode没有代码提示的解决办法"><a href="#vsCode没有代码提示的解决办法" class="headerlink" title="vsCode没有代码提示的解决办法"></a>vsCode没有代码提示的解决办法</h1><ul>
<li><img src= "/img/loading.gif" data-src="/images/hexo/vscode%E6%B2%A1%E6%9C%89%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA.jpg" alt="vscode没有代码提示"></li>
</ul>
<h1 id="在vue3中使用全局变量"><a href="#在vue3中使用全局变量" class="headerlink" title="在vue3中使用全局变量"></a>在vue3中使用全局变量</h1><ul>
<li><p>在main.ts中定义全局变量$axios</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import axios from &#39;axios&#39;</span><br><span class="line"></span><br><span class="line">const app &#x3D; createApp(App)</span><br><span class="line">app.config.globalProperties.$axios &#x3D; axios</span><br></pre></td></tr></table></figure>
</li>
<li><p>在页面中使用</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; onMounted, getCurrentInstance &#125; from &#39;vue&#39;;</span><br><span class="line"></span><br><span class="line">onMounted(()&#x3D;&gt;&#123;</span><br><span class="line">  ctx.$axios.get(&quot;&#x2F;Auction&#x2F;GetListJson&quot;, &#123;index: 1&#125;).then(res&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&quot;res&quot;, res)</span><br><span class="line">  &#125;).catch(err&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&#39;err&#39;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="封装axios"><a href="#封装axios" class="headerlink" title="封装axios"></a>封装axios</h1><ol>
<li><p>在src下，新建utils/request.ts，并写入:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 默认利用axios的cancelToken进行防重复提交。</span><br><span class="line">&#x2F;&#x2F; 如需允许多个提交同时发出。则需要在请求配置config中增加 neverCancel 属性，并设置为true</span><br><span class="line"></span><br><span class="line">import axios from &#39;axios&#39;;</span><br><span class="line">&#x2F;&#x2F; import store from &#39;..&#x2F;store&#x2F;index&#39;;</span><br><span class="line">&#x2F;&#x2F; import &#123; getSessionId &#125; from &#39;@&#x2F;utils&#x2F;auth&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;* 防止重复提交，利用axios的cancelToken *&#x2F;</span><br><span class="line">let pending: any[] &#x3D; []; &#x2F;&#x2F; 声明一个数组用于存储每个ajax请求的取消函数和ajax标识</span><br><span class="line">const CancelToken: any &#x3D; axios.CancelToken;</span><br><span class="line"></span><br><span class="line">const removePending: any &#x3D; (config: any, f: any) &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; 获取请求的url</span><br><span class="line">  const flagUrl &#x3D; config.url;</span><br><span class="line">  &#x2F;&#x2F; 判断该请求是否在请求队列中</span><br><span class="line">  if (pending.indexOf(flagUrl) !&#x3D;&#x3D; -1) &#123;</span><br><span class="line">    &#x2F;&#x2F; 如果在请求中，并存在f,f即axios提供的取消函数</span><br><span class="line">    if (f) &#123;</span><br><span class="line">      f(&#39;取消重复请求&#39;); &#x2F;&#x2F; 执行取消操作</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      pending.splice(pending.indexOf(flagUrl), 1); &#x2F;&#x2F; 把这条记录从数组中移除</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    &#x2F;&#x2F; 如果不存在在请求队列中，加入队列</span><br><span class="line">    if (f) &#123;</span><br><span class="line">      pending.push(flagUrl);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;* 创建axios实例 *&#x2F;</span><br><span class="line">const service &#x3D; axios.create(&#123;</span><br><span class="line">  timeout: 5000, &#x2F;&#x2F; 请求超时时间</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;* request拦截器 *&#x2F;</span><br><span class="line">service.interceptors.request.use((config: any) &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; neverCancel 配置项，允许多个请求</span><br><span class="line">  if (!config.neverCancel) &#123;</span><br><span class="line">    &#x2F;&#x2F; 生成cancelToken</span><br><span class="line">    config.cancelToken &#x3D; new CancelToken((c: any) &#x3D;&gt; &#123;</span><br><span class="line">      removePending(config, c);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;&#x2F; 在这里可以统一修改请求头，例如 加入 用户 token 等操作</span><br><span class="line">  &#x2F;&#x2F;   if (store.getters.sessionId) &#123;</span><br><span class="line">  &#x2F;&#x2F;     config.headers[&#39;X-SessionId&#39;] &#x3D; getSessionId(); &#x2F;&#x2F; 让每个请求携带token--[&#39;X-Token&#39;]为自定义key</span><br><span class="line">  &#x2F;&#x2F;   &#125;</span><br><span class="line">  return config;</span><br><span class="line">&#125;, (error: any) &#x3D;&gt; &#123;</span><br><span class="line">  Promise.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;* respone拦截器 *&#x2F;</span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  (response: any) &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; 移除队列中的该请求，注意这时候没有传第二个参数f</span><br><span class="line">    removePending(response.config);</span><br><span class="line">    &#x2F;&#x2F; 获取返回数据，并处理。按自己业务需求修改。下面只是个demo</span><br><span class="line">    const res &#x3D; response.data;</span><br><span class="line">    console.log(&quot;res&quot;, res)</span><br><span class="line">    if (res.code !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">      if (res.code &#x3D;&#x3D;&#x3D; 401) &#123;</span><br><span class="line">        &#x2F;&#x2F; 返回对应的页面</span><br><span class="line">        &#x2F;&#x2F; if (location.hash &#x3D;&#x3D;&#x3D; &#39;#&#x2F;&#39;) &#123;</span><br><span class="line">        &#x2F;&#x2F;   return res;</span><br><span class="line">        &#x2F;&#x2F; &#125; else &#123;</span><br><span class="line">        &#x2F;&#x2F;   location.href &#x3D; &#39;&#x2F;#&#x2F;&#39;;</span><br><span class="line">        &#x2F;&#x2F; &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return Promise.reject(&#39;error&#39;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return response;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error: any) &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; 异常处理</span><br><span class="line">    console.log(error)</span><br><span class="line">    pending &#x3D; [];</span><br><span class="line">    if (error.message &#x3D;&#x3D;&#x3D; &#39;取消重复请求&#39;) &#123;</span><br><span class="line">      return Promise.reject(error);</span><br><span class="line">    &#125;</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">export default service;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在src下，新建service文件夹，新建acution.ts，并写入:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import request from &#39;@&#x2F;utils&#x2F;request&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; get</span><br><span class="line">export function getList(params?: any) &#123;</span><br><span class="line">  return request(&#123;</span><br><span class="line">    url: &#39;&#x2F;Auction&#x2F;GetListJson&#39;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; post</span><br><span class="line">export function loginService(params?: any) &#123;</span><br><span class="line">  return request(&#123;</span><br><span class="line">    url: &quot;&#x2F;Login&#x2F;DoLogin&quot;,</span><br><span class="line">    method: &quot;post&quot;,</span><br><span class="line">    data: params</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="在vue3中使用element-plus的form组件并校验"><a href="#在vue3中使用element-plus的form组件并校验" class="headerlink" title="在vue3中使用element-plus的form组件并校验"></a>在vue3中使用element-plus的form组件并校验</h1><ul>
<li>详细代码如下：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class&#x3D;&quot;box&quot;&gt;</span><br><span class="line">  &lt;el-form :model&#x3D;&quot;ruleForm&quot; :rules&#x3D;&quot;rules&quot; ref&#x3D;&quot;ruleFormsss&quot; label-width&#x3D;&quot;100px&quot;&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;用户&quot; prop&#x3D;&quot;username&quot;&gt;</span><br><span class="line">      &lt;el-input v-model&#x3D;&quot;ruleForm.username&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;密码&quot; prop&#x3D;&quot;password&quot;&gt;</span><br><span class="line">      &lt;el-input v-model&#x3D;&quot;ruleForm.password&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;活动区域&quot; prop&#x3D;&quot;region&quot;&gt;</span><br><span class="line">    &lt;el-select v-model&#x3D;&quot;ruleForm.region&quot; placeholder&#x3D;&quot;请选择活动区域&quot;&gt;</span><br><span class="line">      &lt;el-option label&#x3D;&quot;区域一&quot; value&#x3D;&quot;shanghai&quot;&gt;&lt;&#x2F;el-option&gt;</span><br><span class="line">      &lt;el-option label&#x3D;&quot;区域二&quot; value&#x3D;&quot;beijing&quot;&gt;&lt;&#x2F;el-option&gt;</span><br><span class="line">    &lt;&#x2F;el-select&gt;</span><br><span class="line">  &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;el-form-item&gt;</span><br><span class="line">      &lt;el-button type&#x3D;&quot;primary&quot; size&#x3D;&quot;medium&quot; @click&#x3D;&quot;submitForm&quot;&gt;登 录&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">  &lt;&#x2F;el-form&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  reactive,</span><br><span class="line">  ref,</span><br><span class="line">  unref</span><br><span class="line">&#125; from &#39;vue&#39;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup(props) &#123;</span><br><span class="line">    const ruleFormsss &#x3D; ref(null);</span><br><span class="line">    &#x2F;&#x2F; 定义变量</span><br><span class="line">    const ruleForm &#x3D; reactive(&#123;</span><br><span class="line">      username: &#39;&#39;,</span><br><span class="line">      password: &#39;&#39;,</span><br><span class="line">      region: &#39;&#39;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    const rules &#x3D; &#123;</span><br><span class="line">      username: [</span><br><span class="line">        &#123; required: true, message: &#39;请输入用户名&#39;, trigger: &#39;blur&#39; &#125;,</span><br><span class="line">      ],</span><br><span class="line">      password: [</span><br><span class="line">        &#123; required: true, message: &#39;请输入密码&#39;, trigger: &#39;blur&#39; &#125;,</span><br><span class="line">      ],</span><br><span class="line">      region: [</span><br><span class="line">        &#123; required: true, message: &#39;请选择活动区域&#39;, trigger: &#39;change&#39; &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const submitForm &#x3D; async () &#x3D;&gt; &#123;</span><br><span class="line">      const form &#x3D; unref(ruleFormsss);</span><br><span class="line">      if (!form) return</span><br><span class="line">      try &#123;</span><br><span class="line">        await form.validate()</span><br><span class="line">        const &#123; username, password, region &#125; &#x3D; ruleForm</span><br><span class="line">        console.log(username, password, region)</span><br><span class="line">      &#125; catch (error) &#123;</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      ruleForm,</span><br><span class="line">      rules,</span><br><span class="line">      submitForm,</span><br><span class="line">      ruleFormsss</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="vue3修改框架的默认样式"><a href="#vue3修改框架的默认样式" class="headerlink" title="vue3修改框架的默认样式"></a>vue3修改框架的默认样式</h1><ul>
<li>使用:deep()<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.van-cell--clickable &#123;</span><br><span class="line">  border-bottom: 1px solid rgba(0, 0, 0, 0.15);</span><br><span class="line">  height: 40px;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  :deep(.van-cell__value span) &#123;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    color: #000;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="vue3给computed传值，动态修改图片路径"><a href="#vue3给computed传值，动态修改图片路径" class="headerlink" title="vue3给computed传值，动态修改图片路径"></a>vue3给computed传值，动态修改图片路径</h1>  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;li v-for&#x3D;&quot;(item, index) in dataSource.product_info &amp;&amp; dataSource.product_info.sell_point_desc&quot; :key&#x3D;&quot;index&quot;&gt;</span><br><span class="line">  &lt;van-image lazy-load :src&#x3D;&quot;decImg(index + 1)&quot; &#x2F;&gt;</span><br><span class="line">  &lt;span&gt;&#123;&#123; item &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 描述里面的图片</span><br><span class="line">const decImg &#x3D; computed(()&#x3D;&gt;&#123;</span><br><span class="line">  return (str: number)&#x3D;&gt;&#123;</span><br><span class="line">    return new URL(&#96;..&#x2F;..&#x2F;assets&#x2F;images&#x2F;img$&#123;str&#125;.png&#96;, import.meta.url).href</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="vue3中使用js-cookie"><a href="#vue3中使用js-cookie" class="headerlink" title="vue3中使用js-cookie"></a>vue3中使用js-cookie</h1><ul>
<li>安装： npm install –save js-cookie</li>
<li>使用:<ul>
<li>Cookies.set(‘name’, ‘value’);</li>
<li>Cookies.set(‘name’, ‘value’, { expires: 7 });</li>
<li>Cookies.get(‘name’);</li>
<li>Cookies.get();</li>
<li>Cookies.remove(‘name’);</li>
</ul>
</li>
</ul>
<h1 id="vue3中使用computed"><a href="#vue3中使用computed" class="headerlink" title="vue3中使用computed"></a>vue3中使用computed</h1>  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 注册资本</span><br><span class="line">let RegisteredCapital: ComputedRef&lt;string&gt; &#x3D; computed(() &#x3D;&gt; &#123;</span><br><span class="line">  return &#96;$&#123;Number(userInfo.DealerInfo?.RegisteredCapital) &#x2F; 10000&#125;&#96;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">return &#123;</span><br><span class="line">  RegisteredCapital,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="vue3中监听路由值的变化"><a href="#vue3中监听路由值的变化" class="headerlink" title="vue3中监听路由值的变化"></a>vue3中监听路由值的变化</h1><ul>
<li>使用组件内的onBeforeRouteUpdate<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">setup() &#123;</span><br><span class="line">  const route &#x3D; useRoute();</span><br><span class="line">  const isLogin &#x3D; ref(false)</span><br><span class="line">  if(route.path &#x3D;&#x3D;&#x3D; &quot;&#x2F;login&quot; || route.path &#x3D;&#x3D;&#x3D; &quot;&#x2F;register&quot;) &#123;</span><br><span class="line">    isLogin.value &#x3D; true</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    isLogin.value &#x3D; false</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; 监听路由值得变化</span><br><span class="line">  onBeforeRouteUpdate((to): void &#x3D;&gt; &#123;</span><br><span class="line">    console.log(&quot;to.path&quot;, to.path)</span><br><span class="line">    if(to.path &#x3D;&#x3D;&#x3D; &quot;&#x2F;login&quot; || to.path &#x3D;&#x3D;&#x3D; &quot;&#x2F;register&quot;) &#123;</span><br><span class="line">      isLogin.value &#x3D; true</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      isLogin.value &#x3D; false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  return &#123;</span><br><span class="line">    isLogin,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="在vue3中使用404页面"><a href="#在vue3中使用404页面" class="headerlink" title="在vue3中使用404页面"></a>在vue3中使用404页面</h1>  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123; &#x2F;&#x2F; 设置404页面</span><br><span class="line">  path: &#39;&#x2F;:catchAll(.*)&#39;,</span><br><span class="line">  name: &#39;404&#39;,</span><br><span class="line">  component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;ErrorPage.vue&#39;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="在vue3中绑定样式"><a href="#在vue3中绑定样式" class="headerlink" title="在vue3中绑定样式"></a>在vue3中绑定样式</h1>  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;nav&quot; :style&#x3D;&quot;personalNav&quot;&gt;</span><br><span class="line"></span><br><span class="line">props: &#123;</span><br><span class="line">  navHeight: &#123; type: Number, default: 42 &#125;</span><br><span class="line">&#125;,</span><br><span class="line">setup(props) &#123;</span><br><span class="line">  const personalNav &#x3D; computed(()&#x3D;&gt;&#123;</span><br><span class="line">    if(props.navHeight) &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        &#39;height&#39;: props.navHeight,</span><br><span class="line">        &#39;background-color&#39;: &#39;red&#39;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  return &#123;</span><br><span class="line">    personalNav</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="element-plus递归渲染动态菜单"><a href="#element-plus递归渲染动态菜单" class="headerlink" title="element-plus递归渲染动态菜单"></a>element-plus递归渲染动态菜单</h1><ol>
<li><p>准备路由数据(hidden表示不渲染出来)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export const constantRoutes &#x3D; [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;&#39;,</span><br><span class="line">    name: &#39;home&#39;,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: &#39;&#x2F;index&#39;,</span><br><span class="line">    hidden: true,</span><br><span class="line">    children: [&#123;</span><br><span class="line">      path: &#39;index&#39;,</span><br><span class="line">      name: &#39;Home&#39;,</span><br><span class="line">      component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;home.vue&#39;),</span><br><span class="line">      meta: &#123; title: &#39;首页&#39;, icon: &#39;el-icon-s-home&#39; &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;system&#39;,</span><br><span class="line">    component: Layout,</span><br><span class="line">    redirect: &#39;&#x2F;system&#x2F;user&#39;,</span><br><span class="line">    meta: &#123; title: &#39;系统管理&#39;, icon: &#39;el-icon-reading&#39; &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;user&#39;,</span><br><span class="line">        name: &#39;UserManage&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;UserManage&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;用户管理&#39;, icon: &#39;el-icon-goods&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;role&#39;,</span><br><span class="line">        name: &#39;RoleManage&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;RoleManage&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;角色管理&#39;, icon: &#39;el-icon-goods&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;menu&#39;,</span><br><span class="line">        name: &#39;MenuManage&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;MenuManage&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;菜单管理&#39;, icon: &#39;el-icon-help&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;dept&#39;,</span><br><span class="line">        name: &#39;DepartmentManage&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;DepartmentManage&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;部门管理&#39;, icon: &#39;el-icon-picture-outline-round&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;post&#39;,</span><br><span class="line">        name: &#39;PostManage&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;PostManage&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;岗位管理&#39;, icon: &#39;el-icon-video-camera&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;dict&#39;,</span><br><span class="line">        name: &#39;DictionaryManage&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;DictionaryManage&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;字典管理&#39;, icon: &#39;el-icon-message-solid&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;config&#39;,</span><br><span class="line">        name: &#39;ParamSet&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;ParamSet&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;参数设置&#39;, icon: &#39;el-icon-s-platform&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;notice&#39;,</span><br><span class="line">        name: &#39;NoticeMessage&#39;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;NoticeMessage&#x2F;index.vue&#39;),</span><br><span class="line">        meta: &#123; title: &#39;通知公告&#39;, icon: &#39;el-icon-s-promotion&#39; &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#39;&#x2F;system&#x2F;log&#39;,</span><br><span class="line">        name: &#39;LogManage&#39;,</span><br><span class="line">        meta: &#123; title: &#39;日志管理&#39;, icon: &#39;el-icon-scissors&#39; &#125;,</span><br><span class="line">        component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;LogManage&#x2F;ActionLog.vue&#39;),</span><br><span class="line">        children: [</span><br><span class="line">          &#123;</span><br><span class="line">            path: &#39;&#x2F;system&#x2F;log&#x2F;operlog&#39;,</span><br><span class="line">            name: &#39;ActionLog&#39;,</span><br><span class="line">            component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;LogManage&#x2F;ActionLog.vue&#39;),</span><br><span class="line">            meta: &#123; title: &#39;操作日志&#39;, icon: &#39;el-icon-s-comment&#39; &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            path: &#39;&#x2F;system&#x2F;log&#x2F;logininfor&#39;,</span><br><span class="line">            name: &#39;LoginLog&#39;,</span><br><span class="line">            component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;LogManage&#x2F;LoginLog.vue&#39;),</span><br><span class="line">            meta: &#123; title: &#39;登录日志&#39;, icon: &#39;el-icon-s-data&#39; &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;:catchAll(.*)&#39;,</span><br><span class="line">    component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;404.vue&#39;),</span><br><span class="line">    hidden: true</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建menu.vue</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-menu</span><br><span class="line">    :uniqueOpened&#x3D;&quot;true&quot;</span><br><span class="line">    class&#x3D;&quot;menu&quot;</span><br><span class="line">    background-color&#x3D;&quot;#545c64&quot;</span><br><span class="line">    text-color&#x3D;&quot;#fff&quot;</span><br><span class="line">    active-text-color&#x3D;&quot;#ffd04b&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;menu-item</span><br><span class="line">      v-for&#x3D;&quot;route in menuData.menuArr&quot;</span><br><span class="line">      :key&#x3D;&quot;route.path&quot;</span><br><span class="line">      :item&#x3D;&quot;route&quot;</span><br><span class="line">      :base-path&#x3D;&quot;route.path&quot;</span><br><span class="line">    &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;el-menu&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent, onMounted, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; constantRoutes &#125; from &quot;@&#x2F;router&#x2F;index&quot;;</span><br><span class="line">import menuItem from &#39;@&#x2F;layout&#x2F;components&#x2F;menuItem.vue&#39;;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    menuItem</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    let menuData &#x3D; reactive&lt;any&gt;(&#123;</span><br><span class="line">      menuArr: [],</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    onMounted(() &#x3D;&gt; &#123;</span><br><span class="line">      menuData.menuArr &#x3D; constantRoutes;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      menuData,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang&#x3D;&quot;scss&quot;&gt;</span><br><span class="line">.menu &#123;</span><br><span class="line">  height: 100vh;</span><br><span class="line">  background-color: rgb(48, 65, 86);</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子组件menuItem.vue</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if&#x3D;&quot;!item.hidden&quot;&gt;</span><br><span class="line">    &lt;el-submenu v-if&#x3D;&quot;item.children &amp;&amp; item.children.length &gt; 0&quot; :index&#x3D;&quot;item.path&quot;&gt;</span><br><span class="line">      &lt;template #title&gt;</span><br><span class="line">        &lt;i :class&#x3D;&quot;item.meta.icon&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123; item.meta.title &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;menu-item </span><br><span class="line">        v-for&#x3D;&quot;it in item.children&quot;</span><br><span class="line">        :key&#x3D;&quot;it.path&quot;</span><br><span class="line">        :item&#x3D;&quot;it&quot;</span><br><span class="line">        :basePath&#x3D;&quot;it.path&quot;</span><br><span class="line">      &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-submenu&gt;</span><br><span class="line">    &lt;el-menu-item v-else :index&#x3D;&quot;item.path&quot; @click&#x3D;&quot;getPath(item.path)&quot;&gt;</span><br><span class="line">      &lt;i :class&#x3D;&quot;item.meta.icon&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">      &lt;span&gt;&#123;&#123; item.meta.title &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;el-menu-item&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang&#x3D;&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  props: [&quot;item&quot;, &quot;basePath&quot;],</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const router &#x3D; useRouter();</span><br><span class="line"></span><br><span class="line">    function getPath(path: string) &#123;</span><br><span class="line">      console.log(&quot;path&quot;, path)</span><br><span class="line">      router.push(path)</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      getPath</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="vue3移动端开发"><a href="#vue3移动端开发" class="headerlink" title="vue3移动端开发"></a>vue3移动端开发</h1><h2 id="vue3中使用vant-ui"><a href="#vue3中使用vant-ui" class="headerlink" title="vue3中使用vant ui"></a>vue3中使用vant ui</h2><ol>
<li>安装vant ui<ul>
<li>官网：<a href="https://vant-contrib.gitee.io/vant/v3/#/zh-CN" target="_blank" rel="noopener">https://vant-contrib.gitee.io/vant/v3/#/zh-CN</a></li>
<li>执行命令：npm i vant@next -S</li>
</ul>
</li>
<li>在main.ts中引用<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import Vant from &#39;vant&#39;;</span><br><span class="line">import &#39;vant&#x2F;lib&#x2F;index.css&#39;;</span><br><span class="line"></span><br><span class="line">const app &#x3D; createApp(App)</span><br><span class="line">app.use(Vant)</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="vue3rem转换"><a href="#vue3rem转换" class="headerlink" title="vue3rem转换"></a>vue3rem转换</h2><ol>
<li>安装postcss-pxtorem<ul>
<li>执行命令：npm install postcss postcss-pxtorem –save-dev</li>
</ul>
</li>
<li>在根路径下新建postcss.config.js<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    &#39;postcss-pxtorem&#39;: &#123;</span><br><span class="line">      rootValue: 16,</span><br><span class="line">      propList: [&#39;*&#39;],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>注意：如果设计稿的尺寸不是 375，而是 750 或其他大小，可以将 rootValue 配置调整为:<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    &#x2F;&#x2F; postcss-pxtorem 插件的版本需要 &gt;&#x3D; 5.0.0</span><br><span class="line">    &#39;postcss-pxtorem&#39;: &#123;</span><br><span class="line">      rootValue(&#123; file &#125;) &#123;</span><br><span class="line">        return file.indexOf(&#39;vant&#39;) !&#x3D;&#x3D; -1 ? 16 : 8;</span><br><span class="line">      &#125;,</span><br><span class="line">      propList: [&#39;*&#39;],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="底部安全区适配"><a href="#底部安全区适配" class="headerlink" title="底部安全区适配"></a>底部安全区适配</h2><ul>
<li><p>iPhone X 等机型底部存在底部指示条，指示条的操作区域与页面底部存在重合，容易导致用户误操作，因此我们需要针对这些机型进行安全区适配。Vant 中部分组件提供了 safe-area-inset-top 或 safe-area-inset-bottom 属性，设置该属性后，即可在对应的机型上开启适配，如下示例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">      &lt;!-- 在 head 标签中添加 meta 标签，并设置 viewport-fit&#x3D;cover 值 --&gt;</span><br><span class="line">      &lt;meta</span><br><span class="line">        name&#x3D;&quot;viewport&quot;</span><br><span class="line">        content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0, maximum-scale&#x3D;1.0, minimum-scale&#x3D;1.0, viewport-fit&#x3D;cover&quot;</span><br><span class="line">      &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 开启顶部安全区适配 --&gt;</span><br><span class="line">      &lt;van-nav-bar safe-area-inset-top &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- 开启底部安全区适配 --&gt;</span><br><span class="line">      &lt;van-number-keyboard safe-area-inset-bottom &#x2F;&gt;</span><br><span class="line"># typescript表示未知对象的任意类型</span><br></pre></td></tr></table></figure>
<p>interface tabInfo {<br>  title: string,<br>  [key: string]: string;<br>}</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"># typescript解决以下问题：</span><br></pre></td></tr></table></figure>
<p>&lt;input<br>  type=”text”<br>  placeholder=”邮箱/手机号码/小米ID”<br>  v-model=”userInfo.username”<br>  @input=”changeValue(‘username’, userInfo.username)”<br>/&gt;</p>
<p>const userInfo = reactive({<br>  username: “”,<br>  password: “”,<br>  showPassword: false, // 是否展示password<br>  showUserNameError: false, // 是否开启错误校验<br>});</p>
<p>const changeValue = (key: string, val: string): void =&gt; {<br>  console.log(key, userInfo[key]); 这里报错<br>  userInfo[key] = val;<br>};</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* ![问题](&#x2F;images&#x2F;vue&#x2F;问题.jpg)</span><br><span class="line">* 解决办法：在tsconfig.json中配置suppressImplicitAnyIndexErrors: true</span><br></pre></td></tr></table></figure>
<p>  {</p>
<pre><code>&quot;compilerOptions&quot;: {
  &quot;suppressImplicitAnyIndexErrors&quot;: true,
  ...
},
...</code></pre><p>  }<br>```</p>
</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">杜江</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2021/01/04/vue3/vue3/">http://yoursite.com/2021/01/04/vue3/vue3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">杜江的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue/">vue</a></div><div class="post_share"><div class="social-share" data-image="/images/hexo/hexo_logo.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/05/06/springboot/springboot/"><img class="prev-cover" data-src="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2589588367,2632593097&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">springboot</div></div></a></div><div class="next-post pull-right"><a href="/2020/12/30/interview/interview-node/"><img class="next-cover" data-src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=4104387483,4024841696&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">面试——node篇</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2021/10/14/vueResource/vueResource/" title="vueResource"><img class="relatedPosts_cover" data-src="/images/vue/vue.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-14</div><div class="relatedPosts_title">vueResource</div></div></a></div><div class="relatedPosts_item"><a href="/2020/12/28/interview/interview-vue/" title="面试——vue篇"><img class="relatedPosts_cover" data-src="/images/vue/vue.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-28</div><div class="relatedPosts_title">面试——vue篇</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="lv-container" data-id="city" data-uid="MTAyMC81MDYyNy8yNzExMA=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 杜江</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://dj49846917.github.io/" target="_blank" rel="noopener">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/third-party/click_heart.js"></script></body></html>